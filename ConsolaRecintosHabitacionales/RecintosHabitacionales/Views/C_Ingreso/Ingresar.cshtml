@{
    Layout = "_LayoutLogin";
}

<div class="d-flex flex-column flex-root">
    <div class="d-flex flex-column flex-column-fluid bgi-position-y-bottom position-x-center bgi-no-repeat bgi-size-contain bgi-attachment-fixed" style="background-image: url(../assets/media/illustrations/sketchy-1/14.png)">


        @if (ViewBag.errorLogin != null)
        {
            <input type="hidden" id="mostrarMensajeIngresar" value="@ViewBag.errorLogin" />
        }

        <div class="d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20">
            <a href="#" class="mb-12">
                @*<img src="~/assets/media/logos/LOGO-ORIENTOIL.png" />*@
            </a>
            <div class="w-lg-500px bg-body rounded shadow-sm p-10 p-lg-15 mx-auto">
                <form class="form w-100" novalidate="novalidate" asp-action="Ingresar" id="Ingresar">
                    <div class="text-center mb-10">
                        <h1 class="text-dark mb-3">Ingresar</h1>
                    </div>
                    <div class="fv-row mb-10">
                        <label class="form-label fs-6 fw-bolder text-dark">Cédula/Email</label>
                        <input class="form-control form-control-lg form-control-solid" type="text" name="email" autocomplete="off" value="2200025787" required="required" />
                    </div>
                    <div class="fv-row mb-10">
                        <div class="d-flex flex-stack mb-2">
                            <label class="form-label fw-bolder text-dark fs-6 mb-0">Constraseña:</label>
                            <a href="~/C_Ingreso/OlvidoContrasena" class="link-primary fs-6 fw-bolder">¿Olvidó su contraseña?</a>
                        </div>
                        <input class="form-control form-control-lg form-control-solid" type="password" name="password" autocomplete="off"
                               value="123456." required="required" />
                    </div>
                    <input type="hidden" id="InputToken" name="InputToken" />
                    <div class="text-center">
                        <button type="button" class="g-recaptcha btn btn-lg btn-primary w-100 mb-5"
                                data-sitekey="6LfgZx4fAAAAAKG_jgVjjXeGRgA9A5OIrvigi28n"
                                data-callback='onSubmit'
                                data-action='submit'
                                id="btnIngresar">
                            <span class="indicator-label">
                                Ingresar
                            </span>
                            <span class="indicator-progress">
                                Por favor espere... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                            </span>
                        </button>

                        @*<button class="btn btn-lg btn-primary w-100 mb-5"
                        data-callback='onSubmit'
                        data-action='submit'
                        id="btnIngresar">
                        <span class="indicator-label">
                        Ingresar
                        </span>
                        <span class="indicator-progress">
                        Por favor espere... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                        </span>
                        </button>*@
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


@section scripts{
    <script src="https://www.google.com/recaptcha/api.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            let mensaje = document.getElementById("mostrarMensajeIngresar");
            if (mensaje != undefined) {
                let datosMensaje = document.getElementById("mostrarMensajeIngresar").value;
                if (datosMensaje != undefined) {
                    Swal.fire({
                        title: datosMensaje,
                        showClass: {
                            popup: 'animate__animated animate__fadeInDown'
                        },
                        hideClass: {
                            popup: 'animate__animated animate__fadeOutUp'
                        }
                    })
                }
            }
        });

        function onSubmit(token) {
            var tokenInput = document.getElementById("InputToken");
            var btnIngresar = document.getElementById("btnIngresar");
            btnIngresar.setAttribute("data-kt-indicator", "on");
            tokenInput.value = token;
            console.log("tokenk:" + token)
            document.getElementById("Ingresar").submit();
        }


    </script>
}
